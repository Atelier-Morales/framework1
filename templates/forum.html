<link href='https://cdnjs.cloudflare.com/ajax/libs/foundicons/3.0.0/foundation-icons.css' rel='stylesheet' type='text/css'>

<div class="off-canvas-wrap move-right" data-offcanvas>
    <div class="inner-wrap">

    <sidebar-admin ng-if="userInfo.is_admin"></sidebar-admin>
    <sidebar-user ng-if="!userInfo.is_admin"></sidebar-user>
        
        
    <!-- Off Canvas Menu -->
    <aside>
    </aside>

    <!-- main content goes here -->
    <header class="row">
      <div class="small-12 columns">
        <h2 class="h2-center">Forum {{ setUsername(userInfo.username) }}</h2>
      </div>
    </header>
    
    <div class="row forum-column">
      <div>
        <button class="button small radius" href="#" data-reveal-id="forumModal">Create a category</button>
        <br> 
        <ul class="accordion" data-accordion ng-repeat="category in categoriesCopy">
            <li class="accordion-navigation" id="top">
                <a href="#panel1{{category.id}}">{{ category.name }}</a>
                <div id="panel1{{category.id}}" class="content">
                    <ul>
                        <li style="background:none;content:none" class="accordion-navigation" ng-repeat="subcategory in category.subCategories">
                            <a href="#panel1{{subcategory.id}}">{{ subcategory.name }}</a>
                        </li>
                    </ul>
                    <br>
                    <button class="button small radius subcategory" 
                            data-reveal-id="categoryModal" 
                            ng-click="setScope(category.name)">Create a sub-category</button>
                </div>
            </li>
        </ul>
        <br>
      </div>
    </div>
        
    <div class="row" style="padding-left: 341px;
                            top: 130px;
                            position: absolute;
                            z-index: 0;">
      <div class="callout-card radius primary medium-12 medium-pull-12 columns back-card">
        <br>
        <h2 style="padding-left:15px;">Available Projects</h2> 
          <button ng-if="userInfo.is_admin" href="#" data-reveal-id="projectModal">Create a Project</button>
        <br>
        
        <div class="large-12 medium-12 small-12 columns">
            <div class="panel callout radius large-4 medium-6 small-12 columns end" ng-repeat="project in projects">
              <div class="callout-card-content">
                <h3 class="lead">{{ project.name }}</h3>
                <p>Deadline : {{ project.deadline }}</p>
                <p>Description : {{ project.description }}</p>
              </div>
                <button ng-if="userInfo.is_admin" ng-click="setIndex($index)" href="#" data-reveal-id="updateProjectModal">Update</button>
                <a ng-if="userInfo.is_admin" ng-click="deleteProject(project.name)" class="button alert">Remove</a>
                <a href="#" ng-click="registerProject(project.name, username, project.deadline)" class="button success">Register</a>
            </div> 
        </div>
      </div>
    </div> 

    <!-- close the off-canvas menu -->
    <a class="exit-off-canvas"></a>

  </div>
</div>

<div id="forumModal" style="width:30%" class="reveal-modal" data-reveal aria-labelledby="sign up" aria-hidden="true" role="dialog">
    <div class="section-container tabs" data-section="tabs">
        <section class="active">
          <div class="content" data-section-content>
            <p>
              <div class="row">
                <div class="large-12 columns">
                  <div class="signup-panel">
                    <p class="welcome">Create category</p>
                    <form name="categoryForm" novalidate>
                      
                      <div class="row collapse">
                        <p>Name</p>
                        <div class="small-10  columns">     
                          <input type="text" name="name" ng-model="name" required>   
                        </div>
                      </div>
        
                      <br><br>
                      <button ng-disabled="categoryForm.name.$error.required" ng-click="createCategory(name)" class="button">
                            Create
                      </button>
                    </form>
                    <span style="color:red" ng-show="regError">
                        Category creation error!
                    </span>
                  </div>
                </div>
               </div></p>
          </div>
        </section>
    </div>
    <a class="close-reveal-modal" aria-label="Close">&#215;</a>
</div>

<div id="categoryModal" style="width:30%" class="reveal-modal" data-reveal aria-labelledby="sign up" aria-hidden="true" role="dialog">
    <div class="section-container tabs" data-section="tabs">
        <section class="active">
          <div class="content" data-section-content>
            <p>
              <div class="row">
                <div class="large-12 columns">
                  <div class="signup-panel">
                    <p class="welcome">Create subcategory in {{ scopeName }}</p>
                    <form name="subcategoryForm" novalidate>
                      
                      <div class="row collapse">
                        <p>Name</p>
                        <div class="small-10  columns">     
                          <input type="text" name="name" ng-model="name" required>   
                        </div>
                      </div>
        
                      <br><br>
                      <button ng-disabled="subcategoryForm.name.$error.required" ng-click="createSubCategory(name, scopeName)" class="button">
                            Create
                      </button>
                    </form>
                    <span style="color:red" ng-show="regError">
                        Subcategory creation error!
                    </span>
                  </div>
                </div>
               </div></p>
          </div>
        </section>
    </div>
    <a class="close-reveal-modal" aria-label="Close">&#215;</a>
</div>

<script type="text/javascript"> 
            $(document).foundation();
</script>